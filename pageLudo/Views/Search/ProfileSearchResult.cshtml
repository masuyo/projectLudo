
@{
    ViewBag.Title = "ProfileSearchResult";
}

@if (Session["AccessedUsername"] != null)
{
    <br />
    <div class="pull-left">
        <h4>Adatlap</h4>
        <br />
        <table>
            <tr>
                <td>Username:</td>
                <td>@Session["AccessedUsername"]</td>
            </tr>
            <tr>
                <td>E-mail address:</td>
                <td>@Session["AccessedEmailID"]</td>
            </tr>
        </table>
        <br />
    </div>

    //Session["AccessedFriendState"]
    //Session["AccessedFriendedYou"] 
    //Session["AccessedFriendedMe"]
    // ha egyikünk sem barátja a másiknak
    if ((string)Session["AccessedFriendedYou"] == "false" && (string)Session["AccessedFriendedMe"] == "false")
    {

        <script src="~/Scripts/jquery-1.10.2.min.js"></script>
        <script type="text/javascript">
            $(function () {
                $("#Friend").click(function () {
                    $.ajax({
                    url: "/Friend/Friending",
                        type: "GET",
                    error: function (response) {
                            alert(response);
                        },
                    success: function (response) {
                            alert(response);
                        }
                    });
                });
            })
        </script>
                <div class="form-group pull-right">
                    <div class="col-sm-12 col-xs-12" style="min-width:200px;">
                        <button id="Friend" class="btn btn-success btn-block">Friend</button>
                        @*<input type="submit" value="Friend" class="btn btn-success btn-block" onclick='this.disabled = "disabled";' />*@
                    </div>
                </div>

    }

    // ha egyikünk barátja a másiknak + 2 ág, én neked/te nekem
    else
    {
        // ha mindketten barátai vagyunk a másiknak vagy én barátnak jelöltelek
        if ((string)Session["AccessedFriendState"] == "true" || ((string)Session["AccessedFriendedYou"] == "true" && (string)Session["AccessedFriendedMe"] == "false"))
        {
            <script src="~/Scripts/jquery-1.10.2.min.js"></script>
                    <script type="text/javascript">
            $(function () {
                $("#Unfriend").click(function () {
                    $.ajax({
                    url: "/Friend/Unfriending",
                        type: "GET",
                    error: function (response) {
                            alert(response);
                        },
                    success: function (response) {
                            alert(response);
                        }
                    });
                });
            })
                    </script>
                    <div class="form-group pull-right">
                        <div class="col-sm-12 col-xs-12" style="min-width:200px; color: red">
                            <button id="Unfriend" class="btn btn-warning btn-block">Unfriend</button>
                        </div>
                    </div>

        }
        // te már a barátom vagy, de én neked nem
        else
        {
            <script src="~/Scripts/jquery-1.10.2.min.js"></script>
                        <script type="text/javascript">
            $(function () {
                $("#FriendAccept").click(function () {
                    $.ajax({
                    url: "/Friend/FriendAccepting",
                        type: "GET",
                    error: function (response) {
                            alert(response);
                        },
                    success: function (response) {
                            alert(response);
                        }
                    });
                });
            })
                        </script>
                        <div class="form-group pull-right">
                            <div class="col-sm-12 col-xs-12" style="min-width:200px; color: red">
                                <button id="FriendAccept" class="btn btn-success btn-block">Friend back</button>
                            </div>
                        </div>
        }

    }

    <div class="clearfix"></div>
}
